!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(1),e.exports=n(3)},function(e,t,n){"use strict";n.r(t),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}return n},writable:!0,configurable:!0}),t.default=[]},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t);var s=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fp_=[],this.km_="activesStates",this.zk_=this.zk_.bind(this),this.no_=this.no_.bind(this),this.ha_=this.ha_.bind(this),this.zv_=this.zv_.bind(this),this.ud_=this.ud_.bind(this),this.rj_=t,this.qt_=n,window.addEventListener("popstate",function(e){i.ug_&&window.location.pathname!=i.ug_?window.history.back():i.rj_()})}var t,n,s;return t=e,(n=[{key:"zk_",value:function(e){var t;"string"==typeof(t=e)&&""!=t?e==window.location.pathname&&"/"!==e||(window.history.pushState({},e,e),this.rj_()):console.error("DynamicApp.goTo(path) - \"path\" must be a 'string' type with value.")}},{key:"no_",value:function(e){var t;null==(t=e)&&null==t||function(e){return"string"==typeof e&&""!=e}(e)?(this.ug_=e,window.history.back()):console.error("DynamicApp.goBack() - \"path\" must be a 'string' type with value.")}},{key:"ha_",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=function(e){return"string"==typeof e&&""!=e},r=function(e){return"boolean"==typeof e},s=function(e){return null==e&&null==e},a=function(e){return Array.isArray(e)&&e.every(function(e){return i(e)})};i(e)||a(e)?s(n)||r(n)?("string"==typeof e&&(e=[e]),e&&(e.forEach(function(e){t.fp_.includes(e)||t.fp_.push(e)}),localStorage&&localStorage.setItem(this.km_,JSON.stringify(this.fp_))),n&&this.qt_()):console.error("DynamicApp.activeState(states, flash) - \"flash\" must be a 'bool' type."):console.error("DynamicApp.activeState(states) - \"states\" must be a 'string' or 'array of string' type with values.")}},{key:"zv_",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=function(e){return"string"==typeof e&&""!=e},s=function(e){return"boolean"==typeof e},a=function(e){return null==e&&null==e},o=function(e){return e instanceof RegExp},c=function(e){return Array.isArray(e)&&e.every(function(e){return r(e)||o(e)})};r(e)||o(e)||c(e)?a(n)||s(n)?(Array.isArray(e)||(e=[e]),e.forEach(function(e){var n=i(t.fp_).reverse().filter(function(t){return new RegExp(e).exec(t)});n&&n.forEach(function(e){return t.fp_.splice(t.fp_.indexOf(e),1)})}),localStorage&&localStorage.setItem(this.km_,JSON.stringify(this.fp_)),n&&this.qt_()):console.error("DynamicApp.unactiveState(states, flash) - \"flash\" must be a 'bool' type."):console.error("DynamicApp.unactiveState(states) - \"states\" must be a 'string' or 'regex' or 'array of strings/regex' type with values.")}},{key:"ud_",value:function(e){var t;if(null==(t=e)&&null==t||function(e){return"string"==typeof e&&""!=e}(e)||function(e){return e instanceof RegExp}(e))return this.fp_.filter(function(t){return new RegExp(e).exec(t)});console.error("DynamicApp.getActiveStates(filter) - \"filter\" must be a 'string' or 'regex' type.")}}])&&r(t.prototype,n),s&&r(t,s),e}();function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rm_={},this.ef_=this.ef_.bind(this),this.cm_=this.cm_.bind(this),this.ou_=this.ou_.bind(this)}var t,n,i;return t=e,(n=[{key:"ef_",value:function(e,t){var n;"string"==typeof(n=hook)&&""!=n?!function(e){return"function"==typeof e}(t)?console.error("DynamicApp.subscribe(hook, fun) - \"fun\" must be a 'function' type."):(this.rm_[e]||(this.rm_[e]=[]),this.rm_[e].push(t)):console.error("DynamicApp.subscribe(hook, fun) - \"hook\" must be a 'string' type.")}},{key:"cm_",value:function(e,t){var n;"string"==typeof(n=hook)&&""!=n?!function(e){return"function"==typeof e}(t)?console.error("DynamicApp.unsubscribe(hook, fun) - \"fun\" must be a 'function' type."):this.rm_[e]&&this.rm_[e].splice(nextListeners.indexOf(t),1):console.error("DynamicApp.unsubscribe(hook, fun) - \"hook\" must be a 'string' type.")}},{key:"ou_",value:function(e,t){this.rm_[e]&&this.rm_[e].forEach(function(e){return e(t)})}}])&&a(t.prototype,n),i&&a(t,i),e}();function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){var t,n,i,r=[],s=!0,a=function(e){return null==e&&null==e},o=function(e){return"function"==typeof e},u=function(e){return"number"==typeof e},l=function(e){return"string"==typeof e&&""!=e},f=function(e){return"boolean"==typeof e},d=function(e){return"object"==c(e)&&null!=e&&null!=e&&e instanceof Object&&!Array.isArray(e)},g=function(e){return Array.isArray(e)},v=function(e){return Array.isArray(e)&&e.every(function(e){return l(e)})};function h(e,t){var s=i[e];"item"==e&&(s=i);var c,h=d(c=s)?"object":g(c)?"array":o(c)?"function":a(c)?"null":l(c)?"string":u(c)?"number":f(c)?"boolean":g(c)&&v(c)?"arrayString":void 0;t.includes(h)||r.push("".concat(n).concat("item"==e?"":"."+e,' - type faild: allow types - "').concat(t,'".'))}function p(e){Object.keys(i).forEach(function(t){e.includes(t)||r.push("".concat(n,".").concat(t,' - property faild: allow properties - "').concat(e,'".'))})}function y(t,s){var o=i[t];if("item"==t&&(o=i),!a(o)){g(o)||(o=[o]);var c={ln_:"widgets",xy_:"services",pr_:"containers",iw_:"savedServices",qi_:"savedWidgets"};o.forEach(function(i){e[s][i]||r.push("".concat(n).concat("item"==t?"":"."+t,' - reference faild: "').concat(i,'" is not fount in the ').concat(c[s]," list."))})}}function b(e){var t=e.split(",").filter(function(e){return!a(i[e])});(0==t.length||t.length>=2)&&r.push("".concat(n,"[").concat(e,"] - oneof faild: must include one of them."))}return i=e.xy_,h("item","null,object"),d(i)&&Object.keys(e.xy_).forEach(function(t){n="services.".concat(t),i=e.xy_[t],h("item","object,function"),d(i)&&(p("catagory,fields,render"),h("render","function"),h("catagory","null,string"),h("fields","null,object"),d(i.fields)&&Object.keys(i.fields).forEach(function(e){n="services.".concat(t,".fields.").concat(e),i=i.fields[e],p("type,require,defaultValue"),h("type","null,string,object,array"),h("require",""),h("defaultValue","null,string")}))}),t="DynamicApp: services - faild (".concat(r.length," ").concat(1==r.length?"error":"errors",")"),r.length&&(console.group(t),r.forEach(function(e){return console.error(e)}),console.groupEnd(t),s=!1,r=[]),i=e.ln_,h("item","object"),d(i)&&Object.keys(e.ln_).forEach(function(t){n="widgets.".concat(t),i=e.ln_[t],h("item","object,function,string"),d(i)&&(p("catagory,fields,render"),h("render","function"),h("catagory","null,string"),h("fields","null,object"),d(i.fields)&&Object.keys(i.fields).forEach(function(e){n="widgets.".concat(t,".fields.").concat(e),i=i.fields[e],p("type,require,defaultValue"),h("type","null,string,object,array"),h("require",""),h("defaultValue","null,string")}))}),t="DynamicApp: widgets - faild (".concat(r.length," ").concat(1==r.length?"error":"errors",")"),r.length&&(console.group(t),r.forEach(function(e){return console.error(e)}),console.groupEnd(t),s=!1,r=[]),i=e.iw_,h("item","null,object"),d(i)&&Object.keys(e.iw_).forEach(function(t){n="savedServices.".concat(t),i=e.iw_[t],h("item","object"),d(i)&&(p("catagory,serviceId,config"),h("serviceId","string"),h("catagory","null,string"),h("config","null,object"),y("serviceId","xy_"))}),t="DynamicApp: savedServices - faild (".concat(r.length," ").concat(1==r.length?"error":"errors",")"),r.length&&(console.group(t),r.forEach(function(e){return console.error(e)}),console.groupEnd(t),s=!1,r=[]),i=e.qi_,h("item","null,object"),d(i)&&Object.keys(e.qi_).forEach(function(t){n="savedWidgets.".concat(t),i=e.qi_[t],h("item","object"),d(i)&&(p("catagory,widgetId,config"),h("serviceId","string"),h("catagory","null,string"),h("config","null,object"),y("serviceId","ln_"))}),t="DynamicApp: savedWidgets - faild (".concat(r.length," ").concat(1==r.length?"error":"errors",")"),r.length&&(console.group(t),r.forEach(function(e){return console.error(e)}),console.groupEnd(t),s=!1,r=[]),i=e.pr_,h("item","object"),d(i)&&Object.keys(e.pr_).forEach(function(t){if(n="containers.".concat(t),i=e.pr_[t],h("item","object"),d(i)){p("catagory,extends,route,state,notState,expresstion,rulesAsHide,services,widgets"),h("catagory","null,string"),h("route","null,string"),h("state","null,string,arrayString"),h("notState","null,string,arrayString"),h("expresstion","null,boolean,string"),h("extends","null,string,arrayString"),h("services","null,object"),h("widgets","null,object"),y("extends","pr_");var r=i.services,s=i.widgets;r&&Object.keys(r).forEach(function(e){n="containers.".concat(t,".services.").concat(e),i=r[e],h("item","object,string"),l(i)?y("item","xy_"):d(i)&&(p("catagory,serviceId,savedServiceId,route,state,notState,expresstion,rulesAsHide,renderUpdate,config,render"),h("catagory","null,string"),h("serviceId","null,string"),h("savedServiceId","null,string"),h("route","null,string"),h("state","null,string,arrayString"),h("notState","null,string,arrayString"),h("expresstion","null,boolean,string"),h("rulesAsHide","null,boolean"),h("renderUpdate","null,boolean"),h("config","null,object"),h("render","null,function"),b("serviceId,savedServiceId,render"),y("serviceId","xy_"),y("savedServiceId","iw_"))}),s&&Object.keys(s).forEach(function(e){n="containers.".concat(t,".widgets.").concat(e),i=s[e],h("item","object"),d(i)&&(p("catagory,widgetId,savedWidgetsId,route,state,notState,expresstion,rulesAsHide,renderUpdate,config,render,async,includeIn,includeBefore,includeAfter"),h("catagory","null,string"),h("widgetId","null,string"),h("savedServiceId","null,string"),h("route","null,string"),h("state","null,string,arrayString"),h("notState","null,string,arrayString"),h("expresstion","null,boolean,string"),h("rulesAsHide","null,boolean"),h("renderUpdate","null,boolean"),h("config","null,object"),h("render","null,function,string"),h("async","null,boolean"),h("includeIn","null,string"),h("includeBefore","null,string"),h("includeAfter","null,string"),b("widgetId,savedWidgetsId,render"),b("includeIn,includeBefore,includeAfter"),y("widgetId","ln_"),y("savedWidgetsId","qi_"))})}}),t="DynamicApp: containers - faild (".concat(r.length," ").concat(1==r.length?"error":"errors",")"),r.length&&(console.group(t),r.forEach(function(e){return console.error(e)}),console.groupEnd(t),s=!1,r=[]),s}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){f(e,t,n[t])})}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ln_={},this.xy_={},this.pr_={},this.iw_={},this.qi_={},this.mf_=this.mf_.bind(this),this.cv_=this.cv_.bind(this)}var t,n,i;return t=e,(n=[{key:"mf_",value:function(e,t){var n;switch(e){case"widgets":n=t?this.ln_[t]:this.ln_;case"services":n=t?this.xy_[t]:this.xy_;case"containers":n=t?this.pr_[t]:this.pr_;case"savedServices":n=t?this.iw_[t]:this.iw_;case"savedWidgets":n=t?this.qi_[t]:this.qi_;default:n={ln_:this.ln_,xy_:this.xy_,pr_:this.pr_,iw_:this.iw_,qi_:this.qi_}}return n}},{key:"cv_",value:function(e){function t(e){if(null===e||"object"!==d(e))return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e)){var n=[];return e.forEach(function(e){n.push(t(e))}),n}var i=new e.constructor;for(var r in e)e.hasOwnProperty(r)&&(i[r]=t(e[r]));return i}function n(e,t){for(var i in t)try{t[i].constructor==Object?e[i]=n(l({},e[i]),l({},t[i])):e[i]=t[i]}catch(n){e[i]=t[i]}return e}return e={xy_:e.services||{},ln_:e.widgets||{},pr_:e.containers||{},iw_:e.savedServices||{},qi_:e.savedWidgets||{}},!!u(n(t(this),t(e)))&&(n(this,e),!0)}}])&&g(t.prototype,n),i&&g(t,i),e}();function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var p,y,b,m,w,S,k,C,A,L,j,E,O,x,W,I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logs=[]}var t,n,i;return t=e,(n=[{key:"mw_",value:function(e){var t="DynamicApp: render app (containers.".concat(e.id,") - faild (").concat(this.logs.length," ").concat(1==this.logs.length?"error":"errors",")");this.logs.length&&(console.group(t),this.logs.forEach(function(e){return console.error(e)}),console.groupEnd(t))}},{key:"tg_",value:function(e,t){console.error('DynamicApp: render app - faild: Container Not found! \n    current route: "'.concat(e,'" \n    active states: [').concat(t.join(", "),"]"))}},{key:"xu_",value:function(e){this.logs.push("internal error: ".concat(e.stack))}},{key:"av_",value:function(e,t){this.logs.push("service.".concat(e," - destroy() faild: ").concat(t.stack))}},{key:"tb_",value:function(e,t){this.logs.push("service.".concat(e," - onUpdate() faild: ").concat(t.stack))}},{key:"pq_",value:function(e,t){this.logs.push("service.".concat(e," - render() faild: ").concat(t.stack))}},{key:"ft_",value:function(e,t){this.logs.push("widget.".concat(e," - destroy() faild: ").concat(t.stack))}},{key:"lp_",value:function(e,t){this.logs.push("widget.".concat(e,' - "onUpdate()" faild: ').concat(t.stack))}},{key:"df_",value:function(e,t){this.logs.push("widget.".concat(e," - render() faild: ").concat(t.stack))}},{key:"pg_",value:function(e,t){console.warn("DynamicApp: render app - widget.".concat(e,' - include path "').concat(t,'" is not found.'))}},{key:"qo_",value:function(e,t,n,i){var r=this,s=!0;return i&&Object.keys(n).forEach(function(e){null==config[e]&&i[e]&&i[e].require&&(r.logs.push("widget.".concat(t,".config.").concat(e," - is require.")),s=!1)}),s}},{key:"vh_",value:function(e,t,n,i){this.logs.push("".concat(e,".").concat(t,".config.").concat(n," - parser faild: ").concat(i.stack))}},{key:"va_",value:function(e,t,n){this.logs.push("".concat(e,".").concat(t,".expresstion - parser faild: ").concat(n.stack))}}])&&h(t.prototype,n),i&&h(t,i),e}(),P=[].slice;
/** @license url-pattern
 * url-pattern.js
 *
 * Copyright (c) url-pattern, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */A=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},k=function(e,t){var n,i,r;for(r=[],n=-1,i=e.length;++n<i;)r=r.concat(t(e[n]));return r},x=function(e,t){var n,i,r;for(r="",n=-1,i=e.length;++n<i;)r+=t(e[n]);return r},O=function(e){return new RegExp(e.toString()+"|").exec("").length-1},j=function(e,t){var n,i,r,s,a;for(s={},n=-1,r=e.length;++n<r;)i=e[n],null!=(a=t[n])&&(null!=s[i]?(Array.isArray(s[i])||(s[i]=[s[i]]),s[i].push(a)):s[i]=a);return s},(p={}).Result=function(e,t){this.value=e,this.rest=t},p.Tagged=function(e,t){this.tag=e,this.value=t},p.tag=function(e,t){return function(n){var i,r;if(null!=(i=t(n)))return r=new p.Tagged(e,i.value),new p.Result(r,i.rest)}},p.regex=function(e){return function(t){var n,i;if(null!=(n=e.exec(t)))return i=n[0],new p.Result(i,t.slice(i.length))}},p.sequence=function(){var e;return e=1<=arguments.length?P.call(arguments,0):[],function(t){var n,i,r,s,a;for(n=-1,i=e.length,a=[],r=t;++n<i;){if(null==(s=(0,e[n])(r)))return;a.push(s.value),r=s.rest}return new p.Result(a,r)}},p.pick=function(){var e,t;return e=arguments[0],t=2<=arguments.length?P.call(arguments,1):[],function(n){var i,r;if(null!=(r=p.sequence.apply(p,t)(n)))return i=r.value,r.value=i[e],r}},p.string=function(e){var t;return t=e.length,function(n){if(n.slice(0,t)===e)return new p.Result(e,n.slice(t))}},p.lazy=function(e){var t;return t=null,function(n){return null==t&&(t=e()),t(n)}},p.baseMany=function(e,t,n,i,r){var s,a,o;for(a=r,o=n?"":[];(null==t||null==t(a))&&null!=(s=e(a));)n?o+=s.value:o.push(s.value),a=s.rest;if(!i||0!==o.length)return new p.Result(o,a)},p.many1=function(e){return function(t){return p.baseMany(e,null,!1,!0,t)}},p.concatMany1Till=function(e,t){return function(n){return p.baseMany(e,t,!0,!0,n)}},p.firstChoice=function(){var e;return e=1<=arguments.length?P.call(arguments,0):[],function(t){var n,i,r;for(n=-1,i=e.length;++n<i;)if(null!=(r=(0,e[n])(t)))return r}},E=function(e){var t;return(t={}).wildcard=p.tag("wildcard",p.string(e.wildcardChar)),t.optional=p.tag("optional",p.pick(1,p.string(e.optionalSegmentStartChar),p.lazy(function(){return t.pattern}),p.string(e.optionalSegmentEndChar))),t.name=p.regex(new RegExp("^["+e.segmentNameCharset+"]+")),t.named=p.tag("named",p.pick(1,p.string(e.segmentNameStartChar),p.lazy(function(){return t.name}))),t.escapedChar=p.pick(1,p.string(e.escapeChar),p.regex(/^./)),t.static=p.tag("static",p.concatMany1Till(p.firstChoice(p.lazy(function(){return t.escapedChar}),p.regex(/^./)),p.firstChoice(p.string(e.segmentNameStartChar),p.string(e.optionalSegmentStartChar),p.string(e.optionalSegmentEndChar),t.wildcard))),t.token=p.lazy(function(){return p.firstChoice(t.wildcard,t.optional,t.named,t.static)}),t.pattern=p.many1(p.lazy(function(){return t.token})),t},C={escapeChar:"\\",segmentNameStartChar:":",segmentValueCharset:"a-zA-Z0-9-_~ %",segmentNameCharset:"a-zA-Z0-9",optionalSegmentStartChar:"(",optionalSegmentEndChar:")",wildcardChar:"*"},S=function(e,t){if(Array.isArray(e))return x(e,function(e){return S(e,t)});switch(e.tag){case"wildcard":return"(.*?)";case"named":return"(["+t+"]+)";case"static":return A(e.value);case"optional":return"(?:"+S(e.value,t)+")?"}},w=function(e,t){return null==t&&(t=C.segmentValueCharset),"^"+S(e,t)+"$"},m=function(e){if(Array.isArray(e))return k(e,m);switch(e.tag){case"wildcard":return["_"];case"named":return[e.value];case"static":return[];case"optional":return m(e.value)}},L=function(e,t,n,i){var r,s,a;if(null==i&&(i=!1),null!=(a=e[t])){if(!((r=n[t]||0)>(Array.isArray(a)?a.length-1:0)))return s=Array.isArray(a)?a[r]:a,i&&(n[t]=r+1),s;if(i)throw new Error("too few values provided for key `"+t+"`")}else if(i)throw new Error("no values provided for key `"+t+"`")},b=function(e,t,n){var i,r;if(Array.isArray(e)){for(i=-1,r=e.length;++i<r;)if(b(e[i],t,n))return!0;return!1}switch(e.tag){case"wildcard":return null!=L(t,"_",n,!1);case"named":return null!=L(t,e.value,n,!1);case"static":return!1;case"optional":return b(e.value,t,n)}},W=function(e,t,n){if(Array.isArray(e))return x(e,function(e){return W(e,t,n)});switch(e.tag){case"wildcard":return L(t,"_",n,!0);case"named":return L(t,e.value,n,!0);case"static":return e.value;case"optional":return b(e.value,t,n)?W(e.value,t,n):""}},(y=function(e,t){var n,i,r;if(e instanceof y)return this.isRegex=e.isRegex,this.regex=e.regex,this.ast=e.ast,void(this.names=e.names);if(this.isRegex=e instanceof RegExp,"string"!=typeof e&&!this.isRegex)throw new TypeError("argument must be a regex or a string");if(this.isRegex){if(this.regex=e,null!=t){if(!Array.isArray(t))throw new Error("if first argument is a regex the second argument may be an array of group names but you provided something else");if(n=O(this.regex),t.length!==n)throw new Error("regex contains "+n+" groups but array of group names contains "+t.length);this.names=t}}else{if(""===e)throw new Error("argument must not be the empty string");if(e.replace(/\s+/g,"")!==e)throw new Error("argument must not contain whitespace");if(i={escapeChar:(null!=t?t.escapeChar:void 0)||C.escapeChar,segmentNameStartChar:(null!=t?t.segmentNameStartChar:void 0)||C.segmentNameStartChar,segmentNameCharset:(null!=t?t.segmentNameCharset:void 0)||C.segmentNameCharset,segmentValueCharset:(null!=t?t.segmentValueCharset:void 0)||C.segmentValueCharset,optionalSegmentStartChar:(null!=t?t.optionalSegmentStartChar:void 0)||C.optionalSegmentStartChar,optionalSegmentEndChar:(null!=t?t.optionalSegmentEndChar:void 0)||C.optionalSegmentEndChar,wildcardChar:(null!=t?t.wildcardChar:void 0)||C.wildcardChar},null==(r=E(i).pattern(e)))throw new Error("couldn't parse pattern");if(""!==r.rest)throw new Error("could only partially parse pattern");this.ast=r.value,this.regex=new RegExp(w(this.ast,i.segmentValueCharset)),this.names=m(this.ast)}}).prototype.match=function(e){var t,n;return null==(n=this.regex.exec(e))?null:(t=n.slice(1),this.names?j(this.names,t):t)},y.prototype.stringify=function(e){if(null==e&&(e={}),this.isRegex)throw new Error("can't stringify patterns generated from a regex");if(e!==Object(e))throw new Error("argument must be an object or undefined");return W(this.ast,e,{})},y.escapeForRegex=A,y.concatMap=k,y.stringConcatMap=x,y.regexGroupCount=O,y.keysAndValuesToObject=j,y.P=p,y.newParser=E,y.defaultOptions=C,y.astNodeToRegexString=w,y.astNodeToNames=m,y.getParam=L,y.astNodeContainsSegmentsForProvidedParams=b,y.stringify=W;var R=y;function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){V(e,t,n[t])})}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var N=function(){function e(t,n,i){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rt_=null,this.ig_=null,this.sm_={},this.zh_={},this.wn_={},this.mf_=t,this.ou_=i,this.ud_=n,this.yn_=this.yn_.bind(this),window.addEventListener("resize",function(){return r.yn_()})}var t,n,i;return t=e,(n=[{key:"yn_",value:function(e){var t=this;try{var n=this.mf_();if(this.vd_=new I,this.wn_={},this.fp_=this.ud_(),this.ig_=this.rt_||{widgets:{}},this.rt_=this.xi_(n.pr_),!this.rt_)return void this.vd_.tg_(window.location.pathname,this.ud_());this.iy_(this.rt_,n),this.mp_(this.rt_,n),Object.keys(this.rt_.services).forEach(function(e){t.vm_(e,t.rt_.services[e],n)}),Object.keys(this.rt_.widgets).forEach(function(e,i){t.rt_.widgets[e].async?setTimeout(function(){return t.cr_(e,t.rt_.widgets[e],t.rt_,n)},+i):t.cr_(e,t.rt_.widgets[e],t.rt_,n)}),this.ou_(e)}catch(e){this.vd_.xu_(e)}this.vd_.mw_(this.rt_)}},{key:"np_",value:function(e,t){var n=this;if(!(this.rt_[e]&&this.rt_[e][t]&&this.rt_[e][t].config))return{};var i=this.rt_[e][t].config,r=(this[e][t].fields,{});return Object.keys(i).forEach(function(s){if("string"==typeof r[s])try{r[s]=Function("services, queryParams",'"use strict";return ('.concat(i[s],")"))(n.sm_,n.wn_)}catch(i){n.vd_.vh_(e,t,s,i),delete r[s]}}),r}},{key:"ex_",value:function(e,t,n){var i,r,s,a=this,o=["expresstion","route","state","notState"].every(function(o){if(!e.hasOwnProperty(o))return!0;switch(o){case"expresstion":if("string"==typeof e[o])try{return!!Function("services, queryParams",'"use strict";return ('.concat(e[o],")"))(a.sm_,a.wn_)}catch(e){return a.vd_.va_(n,t,e),!1}return!!e[o];case"route":return!!(i=new R(e[o]).match(window.location.pathname));case"state":case"notState":return r=e[o]instanceof Array?e[o]:[e[o]],s=r.find(function(e){return a.fp_.find(function(t){return i=new R(e).match(t)})}),"notState"==o?!s:s}return!0});return o&&i&&Object.assign(this.wn_,i),o}},{key:"rc_",value:function(e,t,n){var i=e[t];i.style.display="",i.classList.remove("widget-hide");var r=document.querySelector(n.includeIn||n.includeBefore||n.includeAfter);if(r){if(n.includeIn)r.append(i);else if(n.includeBefore)r.parentNode.insertBefore(i,r);else if(n.includeAfter){var s=r.parentNode.lastChild==r?"append":"insertBefore";r.parentNode[s](i,r.nextSibling)}}else this.vd_.pg_(t,n.includeIn||n.includeBefore||n.includeAfter)}},{key:"gc_",value:function(e,t){var n=e[t];if(n)if(n.isConnected&&n.rulesAsHide)n.classList.add("widget-hide"),n.style.display="none";else{try{n.destroy&&n.destroy()}catch(e){this.vd_.ft_(t,e)}n.remove(),delete e[t]}}},{key:"xi_",value:function(e){var t,n=this,i=Object.keys(e).find(function(i){return t=function t(n){return(n=D({},n)).extends?(("string"==typeof n.extends?[n.extends]:n.extends).forEach(function(i){n=function e(t,n){for(var i in n)try{n[i].constructor==Object?t[i]=e(D({},t[i]),D({},n[i])):t[i]=n[i]}catch(e){t[i]=n[i]}return t}(t(e[i]),n)}),n):n}(e[i]),n.ex_(t,i,"container")});if(i)return t.id=i,t}},{key:"vm_",value:function(e,t,n){var i;if("string"==typeof t&&(t={serviceId:t}),t.serviceId&&(i=t.serviceId),t=D({config:{},renderUpdate:!0},t,{entityId:i}),this.ex_(t,e,"services")){var r=this.ig_&&this.ig_.services&&this.ig_.services[e]&&this.ig_.services[e].config,s=!r&&Object.keys(t.config).find(function(e){return t[e]!=r[e]});if(!this.sm_[e]||s){if(i&&n.xy_[t.entityId].fields){var a=n.xy_[t.entityId].fields;Object.keys(a).forEach(function(e){a[e].defaultValue&&!t.config.hasOwnProperty(e)&&(t.config[e]=a[e].defaultValue)})}var o=this.np_("xy_",e);if(!i||this.vd_.qo_("services",e,t.config,n.xy_[t.entityId].fields))if(this.sm_[e]&&this.sm_[e].onUpdate)try{this.sm_[e].onUpdate(o,this.sm_,this.wn_)}catch(t){this.vd_.tb_(e,t)}else if(!this.sm_[e]||t.renderUpdate){var c,u=n.xy_[i];t.render?c=t.render:"function"==typeof u?c=u:u.render&&(c=u.render);try{c.constructor?this.sm_[e]=new c(o,this.sm_,this.wn_):this.sm_[e]=c(o,this.sm_,this.wn_)}catch(t){this.vd_.pq_(e,t)}}}}else if(this.sm_[e]){try{this.sm_[e].destroy&&this.sm_[e].destroy()}catch(t){this.vd_.av_(e,t)}delete this.sm_[e]}}},{key:"cr_",value:function(e,t,n,i){var r,s=this;t.widgetId&&(r=t.widgetId),t=D({config:{},renderUpdate:!1},t,{entityId:r}),this.zh_[e]&&(this.zh_[e].rulesAsHide=t.rulesAsHide);var a=this.ex_(t,e,"widgets"),o=this.zh_[e]&&"none"==this.zh_[e].style.display&&a;if(a){var c=["includeIn","includeBefore","includeAfter"].find(function(n){return!s.ig_.widgets[e]||t[n]!=s.ig_.widgets[e][n]});c&&this.zh_[e]||this.zh_[e]&&!this.zh_[e].isConnected?(this.zh_[e].remove(),this.rc_(this.zh_,e,t)):o&&this.zh_[e]&&(this.zh_[e].style.display="",this.zh_[e].remove("widget-hide"));var u=this.ig_&&this.ig_.widgets&&this.ig_.widgets[e]&&this.ig_.widgets[e].config,l=!u&&Object.keys(t.config).find(function(e){return t[e]!=u[e]});if(!this.zh_[e]||l||c){if(r&&i.ln_[t.entityId].fields){var f=i.ln_[t.entityId].fields;Object.keys(f).forEach(function(e){f[e].defaultValue&&!t.config.hasOwnProperty(e)&&(t.config[e]=f[e].defaultValue)})}var d=this.np_("ln_",e);if(!r||this.vd_.qo_("widgets",e,t.config,i.ln_[t.entityId].fields))if(this.zh_[e]&&this.zh_[e].onUpdate)try{this.zh_[e].onUpdate(d,this.sm_,this.wn_)}catch(t){this.vd_.lp_(e,t)}else if(!this.zh_[e]||t.renderUpdate){if(!this.zh_[e]){var g=document.createElement("div");g.classList.add("widget"),g.classList.add(e),g.widget=e,this.zh_[e]=g,this.zh_[e].rulesAsHide=t.rulesAsHide,this.rc_(this.zh_,e,t)}var v,h=i.ln_[t.entityId];if(t.render?v=t.render:h&&h.render?v=h.render:h&&(v=h),"string"!=typeof v)try{v(this.zh_[e],d,this.sm_,this.wn_)}catch(t){this.vd_.df_(e,t)}else this.zh_[e].innerHTML=v}}}else this.zh_[e]&&this.gc_(this.zh_,e)}},{key:"iy_",value:function(e,t){var n=this;Object.keys(this.sm_).forEach(function(t){if(!e.services[t]){try{n.sm_[t].destroy&&n.sm_[t].destroy()}catch(e){n.vd_.av_(t,e)}delete n.sm_[t]}}),Object.keys(this.zh_).forEach(function(t){e.widgets[t]||n.gc_(n.zh_,t)})}},{key:"mp_",value:function(e,t){var n;Object.keys(e.services).forEach(function(i){(n=e.services[i]).savedServiceId&&Object.assign(n,t.iw_[n.savedServiceId],n)}),Object.keys(e.widgets).forEach(function(i){n=e.widgets[i],t.qi_[n.savedWidgetId]&&Object.assign(n,t.qi_[n.savedWidgetId],n)})}}])&&T(t.prototype,n),i&&T(t,i),e}();function q(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}
/** @license DynamicApp v0.5.0-beta
 * dynamic-app.js
 *
 * Copyright (c) DynamicApp, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var U=new v,B=new o,_=new s,M=new N(U.mf_,_.ud_,B.ou_);_.rj_=function(){return M.yn_("update_route")},_.qt_=function(){return M.yn_("update_state")};var H=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&U.cv_(t)}var t,n,i;return t=e,(n=[{key:"setConfig",value:function(e){U.cv_(e)}},{key:"goTo",value:function(e){_.zk_(e,function(){return M.yn_("update_route")})}},{key:"goBack",value:function(e){_.no_(e,function(){return M.yn_("update_route")})}},{key:"activeState",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_.ha_(e,t)}},{key:"unactiveState",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];_.zv_(e,t)}},{key:"getActiveStates",value:function(e){return _.ud_(e)}},{key:"subscribe",value:function(e,t){B.ef_(e,t)}},{key:"unsubscribe",value:function(e,t){B.cm_(e,t)}},{key:"flash",value:function(){M.yn_("flash")}}])&&q(t.prototype,n),i&&q(t,i),e}();window.DynamicApp||(window.DynamicApp=new H,Object.freeze(window.DynamicApp));var z,F;t.default=window.DynamicApp;z=void 0,F=function(){return window.DynamicApp},"function"==typeof define&&n(2)?define(F):(z=z||self).DynamicApp=F()}]);